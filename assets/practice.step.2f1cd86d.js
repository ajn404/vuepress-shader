import{C as v,P as l,S as u,D as p,M as m,a as f,b as h}from"./practice.setup.0dbf3b95.js";import{_,d,r as y,s as g,n as x,g as z,h as C,i as S}from"./app.d44df62d.js";var w="uniform vec2 u_resolution;uniform vec2 u_mouse;uniform float u_time;uniform sampler2D iChannel0;uniform sampler2D iChannel1;uniform int u_frame;varying vec3 v_position;void main(){float inCircle=1.0-step(1.0,length(v_position.xy));vec3 color=vec3(0.4157,0.2941,0.2941)*inCircle;gl_FragColor=vec4(color,1.0);}",M="varying vec3 v_position;void main(){v_position=position;gl_Position=projectionMatrix*modelViewMatrix*vec4(position*0.4,1.0);}",k="uniform vec2 u_resolution;uniform vec2 u_mouse;uniform float u_time;uniform sampler2D iChannel0;uniform sampler2D iChannel1;uniform int u_frame;varying vec3 v_position;float rect(vec2 pt,vec2 size,vec2 center){vec2 p=pt-center;vec2 halfSize=size*0.5;float horz=step(-halfSize.x,p.x)-step(halfSize.x,p.x);float vert=step(-halfSize.y,p.y)-step(halfSize.y,p.y);return horz*vert;}void main(){float inRect1=rect(v_position.xy,vec2(0.3,0.3),vec2(0.5,0.5));float inRect2=rect(v_position.xy,vec2(1.1,0.5),vec2(0.5,-0.5));vec3 color=vec3(0.4157,0.2941,0.2941)*inRect1+vec3(1.0,1.0,1.0)*inRect2;gl_FragColor=vec4(color,1.0);}",R="varying vec3 v_position;void main(){v_position=position;gl_Position=projectionMatrix*modelViewMatrix*vec4(position*0.4,1.0);}",b="uniform float u_time;varying vec3 v_position;float rect(vec2 pt,vec2 size,vec2 center){vec2 p=pt-center;vec2 halfSize=size*0.5;float horz=step(-halfSize.y,p.x)-step(halfSize.y,p.x);float vert=step(-halfSize.y,p.y)-step(halfSize.y,p.y);return horz*vert;}void main(){float radius=0.5;vec2 center=vec2(cos(u_time)*radius,sin(u_time)*radius);float inRect=rect(v_position.xy,vec2(0.5,0.5),center);vec3 color=vec3(0.2,0.3,0.5)*inRect;gl_FragColor=vec4(color,1.0);}",F="varying vec2 vUv;uniform vec2 u_resolution;uniform float u_time;varying vec3 v_position;mat2 getRotationMatrix(float theta){float s=sin(theta);float c=cos(theta);return mat2(c,-s,s,c);}float rect(vec2 pt,vec2 size,vec2 center){vec2 p=pt-center;vec2 halfsize=size*0.5;float horz=step(-halfsize.x,p.x)-step(halfsize.x,p.x);float vert=step(-halfsize.y,p.y)-step(halfsize.y,p.y);return horz*vert;}void main(void){vec2 tileCount=vec2(8.0,8.0);vec2 center=vec2(0.5);mat2 mat=getRotationMatrix(u_time);vec2 p=fract(vUv*tileCount);vec2 pt=(mat*(p-center))+center;float inRect=rect(pt,vec2(0.5),center);vec3 color=vec3(1.0,0.0,1.0)*inRect;gl_FragColor=vec4(color,1.0);}",D="varying vec2 vUv;varying vec3 v_position;void main(){v_position=position;vUv=uv;gl_Position=projectionMatrix*modelViewMatrix*vec4(position*0.4,1.0);}";const P=d({__name:"practice.step",props:{type:String},setup(c){const r=c;let o=w,n=M;if(r.type)switch(r.type){case"Square":{o=k,n=R;break}case"utime":{o=b;break}case"tiling":{o=F,n=D;break}}const a=y(null),e=g({u_time:{value:0},u_mouse:{value:{x:0,y:0}},u_resolution:{value:{x:0,y:0}},u_color:{value:new v(65520)},u_frame:{type:"i",value:-1},iChannel0:{type:"t",value:""},iChannel1:{type:"t",value:""}}),s=new f;let t=new h;return t.animate=function(){if(this.render(),e.u_time.value=s.getElapsedTime(),e.u_frame.value++,this.container.getBoundingClientRect().width>0)requestAnimationFrame(this.animate.bind(this));else return},t.move=function(i){e.u_mouse.value.x=i.touches?i.touches[0].clientX:i.clientX,e.u_mouse.value.y=i.touches?i.touches[0].clientY:i.clientY},"ontouchstart"in window?document.addEventListener("touchmove",t.move):document.addEventListener("mousemove",t.move),t.resize=function(){e.u_resolution!==void 0&&(e.u_resolution.value.x=this.width,e.u_resolution.value.y=this.height),e.u_frame.value=0,this.camera.aspect=this.container.clientWidth/this.container.clientHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.container.clientWidth,this.container.clientHeight),this.render()},x(()=>{const i={container:a.value||document.body};t.addObject=function(){this.geometry=new l(2,2),this.material=new u({uniforms:e,side:p,fragmentShader:o,vertexShader:n}),this.mesh=new m(this.geometry,this.material),this.scene.add(this.mesh)},t.init(i),t.camera.position.z=.52}),z(()=>{t.beforeDestroy()}),(i,j)=>(C(),S("div",{class:"practice fullscreen",ref_key:"container",ref:a},null,512))}});var q=_(P,[["__file","practice.step.vue"]]);export{q as _};
