import{T as d,C as v,P as f,S as p,D as g,M as x,R as l,L as y,a as C,b}from"./practice.setup.0dbf3b95.js";import{_ as s,d as w,r as S,n as D,g as k,h as u,i as c,j as r,k as M,l as j}from"./app.d44df62d.js";var F="uniform vec2 u_resolution;uniform vec2 u_mouse;uniform float u_time;uniform sampler2D iChannel0;uniform sampler2D iChannel1;uniform int u_frame;void main(){float bug=0.0;vec3 tile=texture2D(iChannel0,gl_FragCoord.xy/u_resolution,0.).xyz;vec4 col=vec4(tile,1.0);bug=0.01;col.x+=bug;gl_FragColor=col;}",L="void main(){gl_Position=projectionMatrix*modelViewMatrix*vec4(position*0.4,1.0);}";const T=w({__name:"example.lightSaberDuel",setup(m){const o=new d,a=S(null),e={u_time:{value:0},u_mouse:{value:{x:0,y:0}},u_resolution:{value:{x:0,y:0}},u_color:{value:new v(65520)},u_frame:{type:"i",value:-1},iChannel0:{type:"t",value:""},iChannel1:{type:"t",value:""}},h=new C;let n=new b;return n.animate=function(){if(this.render(),e.u_time.value=h.getElapsedTime(),e.u_frame.value++,this.container.getBoundingClientRect().width>0)requestAnimationFrame(this.animate.bind(this));else return},n.move=function(t){e.u_mouse.value.x=t.touches?t.touches[0].clientX:t.clientX,e.u_mouse.value.y=t.touches?t.touches[0].clientY:t.clientY},"ontouchstart"in window?document.addEventListener("touchmove",n.move):document.addEventListener("mousemove",n.move),n.resize=function(){e.u_resolution!==void 0&&(e.u_resolution.value.x=this.width,e.u_resolution.value.y=this.height),e.u_frame.value=0,this.camera.aspect=this.container.clientWidth/this.container.clientHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.container.clientWidth,this.container.clientHeight),this.render()},n.addObject=function(){this.geometry=new f(2,2),this.material=new p({uniforms:e,side:g,fragmentShader:F,vertexShader:L}),this.mesh=new x(this.geometry,this.material),this.scene.add(this.mesh)},D(()=>{const t={container:a.value||document.body};o.load("/vuepress-shader/images/logo.jpg",i=>{i.wrapS=l,i.wrapT=l,i.minFilter=y,e.iChannel0.value=i,e.iChannel1.value=i;try{n.init(t)}catch(_){console.log(_)}})}),k(()=>{n.beforeDestroy()}),(t,i)=>(u(),c("div",{class:"example_lightSaberDuel fullscreen",ref_key:"container",ref:a},null,512))}});var E=s(T,[["__file","example.lightSaberDuel.vue"]]);const P={};function z(m,o){const a=E,e=j("ClientOnly");return u(),c("div",null,[r(e,null,{default:M(()=>[r(a)]),_:1})])}var R=s(P,[["render",z],["__file","lightSaberDuel.html.vue"]]);export{R as default};
